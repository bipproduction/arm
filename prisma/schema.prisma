// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                     String                   @id @default(cuid())
  UseRole                UserRole                 @relation(fields: [idUserRole], references: [id])
  idUserRole             Int
  Profile                Profile?                 @relation(fields: [idProfile], references: [id])
  idProfile              String?
  verificationCode       String?
  expiresTime            DateTime?
  password               String?
  isActive               Boolean                  @default(true)
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  UserLog                UserLog[]
  Notification           Notification[]
  Reimbursement          Reimbursement[]
  AssetsHistoryCondition AssetsHistoryCondition[]
  AssetsHistoryTracking  AssetsHistoryTracking[]
  Delivery               Delivery[]
  ClientProjectHistory   ProjectHistory[]         @relation("ClientHistoryToUser")
  UserProjectHistory     ProjectHistory[]         @relation("ByUserHistoryToUser")
  ClientProject          Project[]                @relation("ClientToUser")
  UserProject            Project[]                @relation("ByUserToUser")
}

model UserRole {
  id        Int      @id @default(autoincrement())
  position  String
  role      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  User      User[]
}

model Profile {
  id        String   @id @default(cuid())
  Image     Image?   @relation(fields: [idImage], references: [id])
  idImage   String?
  Client    Client?  @relation(fields: [idClient], references: [id])
  idClient  String?
  name      String
  email     String   @unique
  phone     String   @unique
  address   String   @db.Text
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  User      User[]
}

model Image {
  id                  String          @id @default(cuid())
  name                String
  extension           String
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt
  Profile             Profile[]
  Reimbursement       Reimbursement[] @relation("ReimbursementToImage")
  PaymentReimursement Reimbursement[] @relation("PaymentToImage")
  Assets              Assets[]
}

model Client {
  id             String           @id @default(cuid())
  name           String
  phone          String
  address        String           @db.Text
  isActive       Boolean          @default(true)
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  Reimbursement  Reimbursement[]
  Outlet         Outlet[]
  Bill           Bill[]
  Assets         Assets[]
  Project        Project[]
  ProjectHistory ProjectHistory[]
  Profile        Profile[]
}

model Reimbursement {
  id                 String    @id @default(cuid())
  User               User      @relation(fields: [idUser], references: [id])
  idUser             String
  Client             Client    @relation(fields: [idClient], references: [id])
  idClient           String
  ImageReimbursement Image?    @relation("ReimbursementToImage", fields: [idImgReimbursement], references: [id], map: "RembursementImg")
  idImgReimbursement String?
  Invoice            Invoice?  @relation(fields: [idInvoice], references: [id])
  idInvoice          String?
  ImagePayment       Image?    @relation("PaymentToImage", fields: [idImgPayment], references: [id], map: "PaymentImg")
  idImgPayment       String?
  dateReimbursement  DateTime  @db.Date
  datePayment        DateTime? @db.Date
  price              BigInt
  title              String
  description        String    @db.Text
  status             Int //0 = waiting approval, 1= approved, 2= paid
  isActive           Boolean   @default(true)
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
}

model Outlet {
  id                    String          @id @default(cuid())
  Client                Client          @relation(fields: [idClient], references: [id])
  idClient              String
  OutletLocation        OutletLocation? @relation(fields: [idLocation], references: [id])
  idLocation            Int?
  OutletType            OutletType?     @relation(fields: [idType], references: [id])
  idType                Int?
  name                  String
  address               String          @db.Text
  contactName           String?
  contactPhone          String?
  email                 String?
  size                  String?
  licenseType           String
  promotionalActivities String?         @db.Text
  link                  String?
  agreement             String?         @db.Text
  visibility            String?         @db.Text
  consumerGroup         String
  pic                   String?
  isActive              Boolean         @default(true)
  createdAt             DateTime        @default(now())
  updatedAt             DateTime        @updatedAt
  ProjectAssets         ProjectAssets[]
  OutletBrand           OutletBrand[]
}

model OutletType {
  id        Int      @id @default(autoincrement())
  name      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Outlet    Outlet[]
}

model OutletLocation {
  id        Int      @id @default(autoincrement())
  name      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Outlet    Outlet[]
}

model OutletBrand {
  id        String   @id @default(cuid())
  Outlet    Outlet   @relation(fields: [idOutlet], references: [id])
  idOutlet  String
  Brand     Brand    @relation(fields: [idBrand], references: [id])
  idBrand   Int
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Bill {
  id        String    @id @default(cuid())
  Client    Client    @relation(fields: [idClient], references: [id])
  idClient  String
  dateBill  DateTime  @db.Date
  total     BigInt
  status    Int // 0 = unpaid, 1 = paid
  isActive  Boolean   @default(true)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  Invoice   Invoice[]
}

model Invoice {
  id            String          @id @default(cuid())
  Bill          Bill?           @relation(fields: [idBill], references: [id])
  idBill        String?
  category      String
  dateInvoice   DateTime        @db.Date
  price         BigInt
  isActive      Boolean         @default(true)
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  Reimbursement Reimbursement[]
}

model Assets {
  id                     String                   @id @default(cuid())
  Brand                  Brand?                   @relation(fields: [idBrand], references: [id])
  idBrand                Int?
  Supplier               Supplier?                @relation(fields: [idSupplier], references: [id])
  idSupplier             Int?
  AssetsCondition        AssetsCondition?         @relation(fields: [idCondition], references: [id])
  idCondition            Int?
  idType                 Int // 1= 1 kategori, 2 = per pcs
  AssetsLocation         AssetsLocation?          @relation(fields: [idLocation], references: [id])
  idLocation             Int?
  AssetsCategory         AssetsCategory?          @relation(fields: [idCategory], references: [id])
  idCategory             Int?
  Image                  Image?                   @relation(fields: [idImage], references: [id])
  idImage                String?
  Client                 Client                   @relation(fields: [idClient], references: [id])
  idClient               String
  sku                    String
  numberAssets           String
  name                   String
  cost                   BigInt
  price                  BigInt
  qty                    Int
  minimumQty             Int
  safetyQty              Int
  dimension              Int
  expiredDate            DateTime                 @db.Date
  handlingInstruction    String?
  description            String?                  @db.Text
  isCondition            Boolean                  @default(false)
  isActive               Boolean                  @default(true)
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  AssetsHistoryCondition AssetsHistoryCondition[]
  AssetsHistoryTracking  AssetsHistoryTracking[]
  ProjectListAssets      ProjectListAssets[]
  AssetsAttributes       AssetsAttributes[]
  AssetsDimension        AssetsDimension[]
}

model AssetsCategory {
  id        Int      @id @default(autoincrement())
  name      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Assets    Assets[]
}

model AssetsCondition {
  id                     Int                      @id @default(autoincrement())
  name                   String
  isActive               Boolean                  @default(true)
  createdAt              DateTime                 @default(now())
  updatedAt              DateTime                 @updatedAt
  Assets                 Assets[]
  AssetsHistoryCondition AssetsHistoryCondition[]
}

model WarehouseLocation {
  id             Int              @id @default(autoincrement())
  name           String
  isActive       Boolean          @default(true)
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  AssetsLocation AssetsLocation[]
}

model AssetsLocation {
  id                Int               @id @default(autoincrement())
  WarehouseLocation WarehouseLocation @relation(fields: [idWarehouse], references: [id])
  idWarehouse       Int
  name              String
  isActive          Boolean           @default(true)
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  Assets            Assets[]
}

model AssetsAttributes {
  id        String   @id @default(cuid())
  Assets    Assets   @relation(fields: [idAssets], references: [id])
  idAssets  String
  name      String
  value     String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model AssetsDimension {
  id        String   @id @default(cuid())
  Assets    Assets   @relation(fields: [idAssets], references: [id])
  idAssets  String
  size      String
  value     String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model AssetsHistoryCondition {
  id              String          @id @default(cuid())
  User            User            @relation(fields: [idUser], references: [id])
  idUser          String
  AssetsCondition AssetsCondition @relation(fields: [idCondition], references: [id])
  idCondition     Int
  Assets          Assets          @relation(fields: [idAssets], references: [id])
  idAssets        String
  description     String          @db.Text
  isActive        Boolean         @default(true)
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
}

model AssetsHistoryTracking {
  id        String   @id @default(cuid())
  User      User     @relation(fields: [idUser], references: [id])
  idUser    String
  Assets    Assets   @relation(fields: [idAssets], references: [id])
  idAssets  String
  location  String   @db.Text
  amount    Int
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ProjectStatus {
  id             Int              @id @default(autoincrement())
  name           String
  alias          String
  isActive       Boolean          @default(true)
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  Project        Project[]
  ProjectHistory ProjectHistory[]
}

model ProjectCategory {
  id             Int              @id @default(autoincrement())
  name           String
  isActive       Boolean          @default(true)
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  Project        Project[]
  ProjectHistory ProjectHistory[]
}

model Project {
  id              String           @id @default(cuid())
  ProjectCategory ProjectCategory? @relation(fields: [idCategory], references: [id])
  idCategory      Int?
  ProjectStatus   ProjectStatus    @relation(fields: [idStatus], references: [id])
  idStatus        Int
  Client          Client           @relation(fields: [idClient], references: [id])
  idClient        String
  UserClients     User?            @relation("ClientToUser", fields: [idUserClient], references: [id], map: "ClientUser")
  idUserClient    String?
  UserBy          User?            @relation("ByUserToUser", fields: [idUserBy], references: [id], map: "ByUser")
  idUserBy        String?
  title           String
  projectNumber   String
  dateEvent       DateTime         @db.Date
  estimatesBudget BigInt
  description     String           @db.Text
  isMadeByAgency  Boolean          @default(false)
  isFormal        Boolean          @default(true)
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  Delivery        Delivery[]
  ProjectAssets   ProjectAssets[]
}

model ProjectHistory {
  id              String           @id @default(cuid())
  ProjectCategory ProjectCategory? @relation(fields: [idCategory], references: [id])
  idCategory      Int?
  ProjectStatus   ProjectStatus    @relation(fields: [idStatus], references: [id])
  idStatus        Int
  Client          Client           @relation(fields: [idClient], references: [id])
  idClient        String
  UserClients     User?            @relation("ClientHistoryToUser", fields: [idUserClient], references: [id], map: "ClientUserHistory")
  idUserClient    String?
  UserBy          User?            @relation("ByUserHistoryToUser", fields: [idUserBy], references: [id], map: "ByUserHistory")
  idUserBy        String?
  title           String
  projectNumber   String
  dateEvent       DateTime         @db.Date
  estimatesBudget BigInt
  description     String           @db.Text
  isMadeByAgency  Boolean          @default(false)
  isFormal        Boolean          @default(true)
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
}

model ProjectAssets {
  id                String              @id @default(cuid())
  Project           Project             @relation(fields: [idProject], references: [id])
  idProject         String
  Outlet            Outlet              @relation(fields: [idOutlet], references: [id])
  idOutlet          String
  note              String
  address           String              @db.Text
  dateDeliveryPlan  DateTime            @db.Date
  isActive          Boolean             @default(true)
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  ProjectListAssets ProjectListAssets[]
}

model ProjectListAssets {
  id              String        @id @default(cuid())
  ProjectAssets   ProjectAssets @relation(fields: [idProjectAssets], references: [id])
  idProjectAssets String
  Assets          Assets        @relation(fields: [idAssets], references: [id])
  idAssets        String
  amount          Int
  note            String        @db.Text
  isActive        Boolean       @default(true)
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
}

model Delivery {
  id              String    @id @default(cuid())
  User            User      @relation(fields: [idUser], references: [id])
  idUser          String
  Project         Project   @relation(fields: [idProject], references: [id])
  idProject       String
  status          Int
  recipientsName  String?
  recipientsPhone String?
  dateProcess     DateTime? @db.Date
  dateDelivery    DateTime? @db.Date
  isActive        Boolean   @default(true)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Cart {
  id        String   @id @default(cuid())
  idAssets  String
  amount    Int
  note      String   @db.Text
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Notification {
  id        String   @id @default(cuid())
  User      User     @relation(fields: [idUser], references: [id])
  idUser    String
  kategori  String
  parameter String
  message   String   @db.Text
  isRead    Boolean  @default(false)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model FAQ {
  id        String   @id @default(cuid())
  question  String   @db.Text
  answer    String   @db.Text
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model UserLog {
  id          String   @id @default(cuid())
  User        User     @relation(fields: [idUser], references: [id])
  idUser      String
  activity    String
  description String   @db.Text
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Supplier {
  id        Int      @id @default(autoincrement())
  name      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Assets    Assets[]
}

model Brand {
  id          Int           @id @default(autoincrement())
  name        String
  isActive    Boolean       @default(true)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  Assets      Assets[]
  OutletBrand OutletBrand[]
}

model Negara {
  id        Int      @id @default(autoincrement())
  name      String
  active    Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model Provinsi {
  id        Int         @id @default(autoincrement())
  name      String
  active    Boolean     @default(true)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @default(now()) @updatedAt
  Kabupaten Kabupaten[]
}

model Kabupaten {
  id         Int         @id @default(autoincrement())
  Provinsi   Provinsi    @relation(fields: [idProvinsi], references: [id])
  idProvinsi Int
  name       String
  active     Boolean     @default(true)
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @default(now()) @updatedAt
  Kecamatan  Kecamatan[]
}

model Kecamatan {
  id          Int       @id @default(autoincrement())
  Kabupaten   Kabupaten @relation(fields: [idKabupaten], references: [id])
  idKabupaten Int
  name        String
  active      Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @default(now()) @updatedAt
}
